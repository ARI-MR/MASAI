<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1038" height="590" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[participant IoT Agent as D
participant Cepheus Broker as B
participant Orion Broker as A

D->B: register
B->A: register (forward)
Note right of A: Third app issues a command
A->B: update (command)
B->D: update (forward)
Note right of A: Third app issues a query
A->B: query (lazy)
B->D: query (forward)
Note left of D: Device pushes an update
D->B: update (active)
B->A: update(forward)]]></source><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path id="raphael-marker-block" d="M5,0 0,2.5 5,5z" stroke-linecap="round"></path><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj213"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj216"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj222"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj225"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj231"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj234"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj240"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker><marker refY="2.5" refX="2.5" orient="auto" markerWidth="5" markerHeight="5" id="raphael-marker-endblock55-obj243"><use stroke="none" fill="#000" stroke-width="1.0000" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"></use></marker></defs><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="38.5" width="107.4000015258789" y="20" x="218.10000228881836"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="87.4000015258789" y="30" x="228.09999084472656"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="39.25" x="271.8000030517578" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">IoT Agent</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="38.5" width="107.4000015258789" y="532" x="218.10000228881836"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="87.4000015258789" y="542" x="228.09999084472656"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="551.25" x="271.8000030517578" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">IoT Agent</tspan></text><path stroke-width="2" d="M271.8000030517578,58.5L271.8000030517578,532" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="38.5" width="155.39999389648438" y="20" x="368.70001220703125"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="135.39999389648438" y="30" x="378.70001220703125"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="39.25" x="446.40000915527344" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Cepheus Broker</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="38.5" width="155.39999389648438" y="532" x="368.70001220703125"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="135.39999389648438" y="542" x="378.70001220703125"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="551.25" x="446.40000915527344" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Cepheus Broker</tspan></text><path stroke-width="2" d="M446.40000915527344,58.5L446.40000915527344,532" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="38.5" width="136.1999969482422" y="20" x="572.1000137329102"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="116.19999694824219" y="30" x="582.1000366210938"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="39.25" x="640.2000122070312" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Orion Broker</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="38.5" width="136.1999969482422" y="532" x="572.1000137329102"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="116.19999694824219" y="542" x="582.1000366210938"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="551.25" x="640.2000122070312" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Orion Broker</tspan></text><path stroke-width="2" d="M640.2000122070312,58.5L640.2000122070312,532" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="77.80000305175781" y="74.25" x="320.20001220703125"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="83.5" x="359.1000061035156" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">register</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj213)" stroke-width="2" d="M271.8000030517578,97C271.8000030517578,97,412.8886039940189,97,441.409444223558,97" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="173.8000030517578" y="112.75" x="456.3999938964844"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="122" x="543.3000106811523" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">register (forward)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj216)" stroke-width="2" d="M446.40000915527344,135.5C446.40000915527344,135.5,604.7949506072009,135.5,635.1900736494897,135.5" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="28.5" width="260.6000061035156" y="155.5" x="660.2000122070312"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="250.60000610351562" y="160.5" x="665.2000122070312"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="169.75" x="790.5000152587891" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Third app issues a command</tspan></text><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="154.60000610351562" y="199.75" x="466"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="209" x="543.3000106811523" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">update (command)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj222)" stroke-width="2" d="M640.2000122070312,222.5C640.2000122070312,222.5,481.80507075510377,222.5,451.4099477128149,222.5" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="154.60000610351562" y="238.25" x="281.8000183105469"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="247.5" x="359.1000061035156" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">update (forward)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj225)" stroke-width="2" d="M446.40000915527344,261C446.40000915527344,261,305.3114082130123,261,276.79056798347324,261" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="28.5" width="241.39999389648438" y="281" x="660.2000122070312"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="231.39999389648438" y="286" x="665.2000122070312"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="295.25" x="780.9000091552734" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Third app issues a query</tspan></text><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="116.19999694824219" y="325.25" x="485.1999816894531"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="334.5" x="543.3000106811523" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">query (lazy)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj231)" stroke-width="2" d="M640.2000122070312,348C640.2000122070312,348,481.80507075510377,348,451.4099477128149,348" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="145" y="363.75" x="286.6000061035156"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="373" x="359.1000061035156" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">query (forward)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj234)" stroke-width="2" d="M446.40000915527344,386.5C446.40000915527344,386.5,305.3114082130123,386.5,276.79056798347324,386.5" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" height="28.5" width="231.8000030517578" y="406.5" x="20"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="221.8000030517578" y="411.5" x="24.9999942779541"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="420.75" x="135.9000015258789" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">Device pushes an update</tspan></text><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="145" y="450.75" x="286.6000061035156"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="460" x="359.1000061035156" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">update (active)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj240)" stroke-width="2" d="M271.8000030517578,473.5C271.8000030517578,473.5,412.8886039940189,473.5,441.409444223558,473.5" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" height="18.5" width="145" y="489.25" x="470.79998779296875"></rect><text fill="#000000" stroke="none" font-size="16px" font-family="Andale Mono, monospace" text-anchor="middle" y="498.5" x="543.3000106811523" style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;"><tspan dy="5.75">update(forward)</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55-obj243)" stroke-width="2" d="M446.40000915527344,512C446.40000915527344,512,604.7949506072009,512,635.1900736494897,512" stroke="#000000" fill="none" style=""></path></svg>